https://kbr.symphonyindai.com/wrp/pages/asset/1?navbar=false


email_manager.py

import requests
import os
import json
import uuid
EMAIL_API_URL = "/api/email/template/"

sample_email = {
  "bccAddresses": [
  ],
  "ccAddresses": [
  ],
  "requestData": {
    "paymentAmount": 42,
    "message": "Thank you for purchasing the answer to the universe. We appreciate your business"
  },
  "userIds": [
    "a917768c-71b8-4ff3-a2a3-21cc4de858c4"
  ]
}
forget_password_template_id = "3e3cc524-c37d-4060-b2e1-e8c1b1346ff8"
tenant_id = "48b668ae-6a78-025d-5197-2c336c4ae7cc"
class EmailManager:
    def __init__(self, auth_url=None, auth_api_key=None):
        self.auth_url = auth_url if auth_url is not None else os.environ["AUTH_HOST_INTERNAL"]
        self.auth_api_key = auth_api_key if auth_api_key is not None else os.environ["AUTH_API_KEY"]

    def set_password_by_user(self):
        pass

    def verify_email(self, verification_id):
        url = self.auth_url + '/api/user/verify-email/' + verification_id
        resp = requests.post(url,
                             headers={
                                 'Authorization': self.auth_api_key,
                                 'Content-Type': 'application/json',
                                 'X-FusionAuth-TenantId': tenant_id})
        print(resp)

    def forget_password(self, payload):
        change_password_id = payload.get('change_password_id', None)
        loginId = payload.get('login_id')
        send_forget_password_email = payload.get('send_forget_password_email', False)
        user = payload.get('user', None)

        res_payload = {}
        if change_password_id is not None:
            res_payload['change_password_id'] = change_password_id
        if loginId is not None:
            res_payload['loginId'] = loginId
        if send_forget_password_email:
            res_payload['send_forget_password_email'] = send_forget_password_email
        if user is not None:
            res_payload['user'] = user

        url = self.auth_url + '/api/user/forget-password'
        resp = requests.post(url,json=json.dumps(res_payload),
                             headers={
                                 'Authorization': self.auth_api_key,
                                 'Content-Type': 'application/json',
                                 'X-FusionAuth-TenantId': tenant_id})

        return resp.json()

    def change_password(self, change_password_id, tenant_id, payload):
        url = self.auth_url + '/api/user/change-password/' + change_password_id
        resp = requests.post(url,data=json.dumps(payload),
                             headers={
                                 'Authorization': self.auth_api_key,
                                 'Content-Type': 'application/json',
                                 'X-FusionAuth-TenantId': tenant_id})
        return resp.json()






----------------------------

                            
    

















